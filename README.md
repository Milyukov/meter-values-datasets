# Counters Datasets

## Описание

В этом репозитории реализована работа с данными для обучения двух моделей для, соотвественно, локализации области показаний счетчиков (с учетом класса) и распознавания показаний на локализованной области.

## Установка

Для настройки среды я скачал Anaconda [отсюда](https://repo.anaconda.com/archive/Anaconda3-2023.07-2-Linux-x86_64.sh).

После установки, нужно сконфигурировать Anaconda:
```cmd
conda config --append channels conda-forge
```

Создание виртуальной среды (запустить в терминале в корне репозитория):
```cmd
conda create --name counters python==3.11.5
```

Активация среды:
```cmd
conda activate counters
```

Установка библиотек:
```cmd
pip install -r requirements.txt
```

Так же нужно установить DVC.

## Использование

Чтобы сгенерировать данные для обучения первой стадии:

1. Установите DVC
2. Скачайте изображения в папку ./meter_values_dataset_stage1/stage1
3. Экспортируйте разметку в формате json с сайта Label-studio
4. Копируйте файл разметки в папку ./meter_values_dataset_stage1 и переименуйте в labels.json
5. Чтобы сгенерировать датасет в формате tf.data для обучения первой стадии, в терминале в папке ./meter_values_dataset_stage1 запустите:
```cmd
dvc repro
```

Чтобы сгенерировать данные для обучения второй стадии:

1. Подготовка изображений для обучения второй стадии
1.1 Скачайте изображения в папку ./meter_values_dataset_stage2/stage2 если они уже существуют
1.2 Чтобы сгенерировать изображения для обучения второй стадии, используя разметку первой стадии, запустите в корне репозитория:
```cmd
dvc repro
```
2. Экспортируйте разметку в формате json с сайта Label-studio
3. Копируйте файл разметки в папку ./meter_values_dataset_stage2 и переименуйте в labels.json
4. Чтобы сгенерировать датасет в формате tf.data для обучения второй стадии, в терминале в папке ./meter_values_dataset_stage2 запустите: 
```cmd
dvc repro
```
